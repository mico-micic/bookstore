<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <f:view locale="#{localeBean.locale}">
        <h:head>
            <title>#{texts.book}#{texts.store}</title>
            <h:outputStylesheet library="default" name="js/qtip/jquery.qtip.min.css" />
            <h:outputStylesheet library="default" name="js/toastr.min.css" />
            <h:outputStylesheet library="default" name="style.css" />
            <h:outputStylesheet library="default" name="loading.css" />
            <h:outputScript library="default" name="js/cufon-yui.js" />
            <h:outputScript library="default" name="js/arial.js" />
            <h:outputScript library="default" name="js/cuf_run.js" />
            <h:outputScript library="default" name="js/jquery-2.1.1.min.js" />
            <h:outputScript library="default" name="js/radius.js" />
            <h:outputScript library="default" name="js/qtip/jquery.qtip.min.js" />
            <h:outputScript library="default" name="js/toastr.min.js" />
            <h:outputScript library="default" name="js/jquery.simplemodal.1.4.4.min.js" />

            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        </h:head>

        <h:body>

            <div class="main">

                <div class="header">
                    <ui:insert name="header" >
                        <ui:include src="/template/default/defaultHeader.xhtml" />
                    </ui:insert>
                </div>

                <div class="content">
                    <ui:insert name="content" >
                        <ui:include src="/template/default/defaultContent.xhtml" />
                    </ui:insert>
                </div>

                <div class="preFooter">
                    <ui:insert name="preFooter" >
                        <ui:include src="/template/default/defaultPreFooter.xhtml" />
                    </ui:insert>
                </div>

                <div class="footer">
                    <ui:insert name="footer" >
                        <ui:include src="/template/default/defaultFooter.xhtml" />
                    </ui:insert>
                </div>
            </div>

            <div id="globalMessages" style="visibility: hidden;">
                <h:messages globalOnly="true" errorClass="globalMsgErr" infoClass="globalMsgInfo" fatalClass="globalMsgErr" warnClass="globalMsgWarn" />
            </div>

            <script>

                toastr.options = {
                    "closeButton": false,
                    "debug": false,
                    "positionClass": "toast-bottom-full-width",
                    "onclick": null,
                    "showDuration": "300",
                    "hideDuration": "1000",
                    "timeOut": "15000",
                    "extendedTimeOut": "1000",
                    "showEasing": "swing",
                    "hideEasing": "linear",
                    "showMethod": "fadeIn",
                    "hideMethod": "fadeOut"
                }

                // Grap global message elements to show global notification
                $('#globalMessages').find('.globalMsgErr').each(function () {
                    showGlobalMessage(toastr, 'error', $(this).html().trim())
                });

                $('#globalMessages').find('.globalMsgInfo').each(function () {
                    showGlobalMessage(toastr, 'info', $(this).html().trim())
                });

                $('#globalMessages').find('.globalMsgWarn').each(function () {
                    showGlobalMessage(toastr, 'warn', $(this).html().trim())
                });

                function showGlobalMessage(toastr, type, html) {
                    if (html !== "") {
                        if (type === "info") {
                            toastr.info(html);
                        } else if (type === "error") {
                            toastr.error(html);
                        } else if (type === "warn") {
                            toastr.warning(html);
                        }
                    }
                }

                // Grab element message elements to apply the tooltip to
                $('.elementMessage').each(function (idx, obj) {
                    $(obj).parent().prev().qtip({
                        content: {text: $(obj).html()},
                        style: {classes: 'qtip-red'},
                        show: {ready: true}
                    });
                });
                
                function showWaitIndicator(text) {
                    if (text &amp;&amp; text.length > 0) { $('#waitIndicatorText').text(text); }
                    $('#ajaxLoaderDiv').modal();
                }

            </script>

            <script>
                jsf.ajax.addOnEvent(function (data) {
                    var ajaxstatus = data.status; // Can be "begin", "complete" and "success"
                    var ajaxloader = document.getElementById("ajaxloader");

                    switch (ajaxstatus) {
                        case "begin": // This is called right before ajax request is been sent.
                            $('#ajaxLoaderDiv').modal();
                            break;

                        case "complete": // This is called right after ajax response is received.
                            $.modal.close();
                            break;

                        case "success": // This is called when ajax response is successfully processed.
                            // NOOP.
                            break;
                    }
                });
            </script>

            <div id="ajaxLoaderDiv">
                <div class="bubblingG">
                    <span id="bubblingG_1"></span>
                    <span id="bubblingG_2"></span>
                    <span id="bubblingG_3"></span>
                </div>
                <span id="waitIndicatorText">#{texts.loading}...</span>
            </div>

        </h:body>

    </f:view>
</html>
