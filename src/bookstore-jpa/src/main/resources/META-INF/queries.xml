<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="1.0" xmlns="http://java.sun.com/xml/ns/persistence/orm" 
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd ">
    
    <named-query name="org.books.persistence.dao.BookByIsbn">
        <query>
            SELECT b 
            FROM Book b
            WHERE UPPER(b.isbn) = UPPER(:isbn)
        </query>
    </named-query>
    
    <named-query name="org.books.persistence.CustomerByEmail">
        <query>
            SELECT c
            FROM Customer c
            WHERE UPPER(c.email) = UPPER(:email)
        </query>
    </named-query>
    
    <named-query name="org.books.persistence.CustomerByNamePart">
        <query>
            SELECT new org.books.persistence.dto.CustomerInfo(c.id, c.firstName, c.lastName, c.email)
            FROM Customer c
            WHERE UPPER(c.firstName) LIKE UPPER(:part)
              OR  UPPER(c.lastName) LIKE UPPER(:part)
        </query>
    </named-query>
    
    <named-query name="org.books.persistence.OrderByNumber">
        <query>
            SELECT o
            FROM Order o
            WHERE UPPER(o.number) = :number
        </query>
    </named-query>
    
    <named-query name="org.books.persistence.OrderByCustomerAndDate">
        <query>
            SELECT NEW org.books.persistence.dto.OrderInfo(o.id, o.number, o.date, o.amount, o.status)
            FROM Order o
            WHERE o.date BETWEEN :begin AND :end
              AND o.customer = :customer
        </query>
    </named-query>

</entity-mappings>